# 多态

同一个对象，在不同时刻表现出不同的形态

前提：有继承或实现关系、方法的重写、父类引用指向子类对象

**多态成员访问特点**：

- 成员变量：编译看父类，运行看父类（重名时优先使用父类变量）
- 成员方法：编译看父类，运行看子类（重名时优先使用子类方法）

```java
class Animal {
    public int age = 40;
    public void eat () {System.out.println("food")}
}

class Cat extends Animal {
    public int age = 20;

    @Override
    public void eat () {System.tou.println("fish")}
}

public class AnimalDemo {
    public static void main () {
        Animal a = new Cat();

        System.out.println(a.age);  // 40
        a.eat();                    // fish
    }
}
```

向上转型：父类指针指向子类对象

- 不能调用子类特有的方法

向下转型：将父类对象强制转换为子类对象（前提：父类对象指向的是子类对象）

- 转型之后就可以调用子类的方法
- ```java
    public void eat(Animal a){
        if(a instanceof Dog){   // instanceof: 检查对象是否为特定类或其子类
            Dog d = (Dog)a;
            d.eat();
            d.run();//狗有一个跑的方法
        }
        if(a instanceof Cat){
            Cat c = (Cat)a;
            c.eat();
            System.out.println("我也想跑，但是不会"); //猫会抱怨
        }
        a.eat();//其他动物只会吃
    }
    eat(new Cat());
    eat(new Cat());
    eat(new Dog());
  ```

# 抽象类

没有方法体的方法应定义为抽象类，类中有抽象方法则类必须定义为抽象类

抽象类中不一定有抽象方法，有抽象方法的类一定是抽象类，使用`abstract`修饰

抽象类不能实例化，只能参照多态的方式通过子类实例化，即抽象类多态

抽象类的子类要么重写抽象类中的所有抽象方法，要么是抽象类

```java
abstract class Animal {
    private String name;
    private int age;

    public Animal (String name, int age) {
        this.name = name;
        this.age = age;
    }

    public abstract void eat();
}

class Cat extends Animal {
    public Cat (String name, int age) {
        super(name, age);
    }

    @Override
    public void eat () {
        System.out.println("fish");
    }
}
```

# 接口

一种公共的规范标准，符合规范则通用。接口体现在对行为的抽象

```java
public interface interfaceName {}

// 类实现接口
public class className implements interfaceName {}
```

接口不可实例化，参照多态，通过实现类对象实例化为接口多态

多态的形式：具体类多态、抽象类多态、接口多态

接口的子类：要么重写接口中所有抽象方法，要么子类也是抽象类

## 接口的成员特点

成员变量：只能是常量，默认修饰符 `public static final`

构造方法：无，其主要为扩展功能，无具体存在

成员方法：只能是抽象方法，默认修饰符`public abstract`

```java
interface Animal {
    int TIME = 1; // 默认 public static final
    void sleep(); // 默认 public abstract
}

// 接口继承接口
interface Mammal extends Animal {
    void walk();
}

public class Test implements Mammal {
    @Override
    public void walk() {
        System.put.println("walk" + TIME);
    }
}
```
